<!DOCTYPE html>
<html lang="en" dir="zh">

<head><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1"
/>
<meta
  http-equiv="Content-Security-Policy"
  content="upgrade-insecure-requests"
/>
<title>
   Java 调用 Javascript 代码 - 大个子斌斌子
  
</title>

<meta name="keywords" content="" />
  <meta property="og:title" content="Java 调用 Javascript 代码"/>
<meta property="og:site_name" content="大个子斌斌子" />
<meta property="og:image" content="/favicon-32x32.png" />
<meta name="title" content="Java 调用 Javascript 代码 - 大个子斌斌子" /> 
<meta name="description" content="" />

<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png" />
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png" />
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png" />
<link
  rel="icon"
  type="image/png"
  sizes="192x192"
  href="/android-icon-192x192.png"
/>
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
<link rel="manifest" href="/manifest.json" />
<meta name="msapplication-TileColor" content="#ffffff" />
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
<meta name="theme-color" content="#ffffff" />
<link href="/zero.css" rel="stylesheet" type="text/css" /></head>
<body>
  <header>
    <div class="header-inner"><div id="site-header" class="header-wrap">
    <div class="title">
        
        <a href="/">大个子斌斌子</a>
        
         &nbsp;|&nbsp; 慢慢浇水，等待，发芽，长大！
    </div>
</div>

<div id="post-header" class="header-wrap">
    <div class="title">Java 调用 Javascript 代码</div>
</div>

</div>
    <div class="header-band"></div>
  </header>
  <main id="main">
    <div class="main-inner">
      <div class="content-wrap">
        <div id="main-content" class="main-content">
<article>
  
  <h2 id="post-title">Java 调用 Javascript 代码</h2>
  
  <div class="post-meta">

   <span class="post-date"> 2019-02-27</span>





<span class="post-count">170</span>

<span class="post-readtime">
    1
</span>
</div>

  
  <div class="post-body"><p>JavaScript <code>d:/tmp/calculator.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">calculator</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object();

<span style="color:#a6e22e">calculator</span>.<span style="color:#a6e22e">add</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">n1</span>, <span style="color:#a6e22e">n2</span>) {<span style="color:#a6e22e">n1</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">n2</span>};
<span style="color:#a6e22e">calculator</span>.<span style="color:#a6e22e">subtract</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">n1</span>, <span style="color:#a6e22e">n2</span>) {<span style="color:#a6e22e">n1</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">n2</span>};
<span style="color:#a6e22e">calculator</span>.<span style="color:#a6e22e">multiply</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">n1</span>, <span style="color:#a6e22e">n2</span>) {<span style="color:#a6e22e">n1</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">n2</span>};
<span style="color:#a6e22e">calculator</span>.<span style="color:#a6e22e">divide</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">n1</span>, <span style="color:#a6e22e">n2</span>) {<span style="color:#a6e22e">n1</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">n2</span>};
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;Number&#39;</span>) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>; <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">b</span>};
</code></pre></div><p>Java Code</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> javax.script.Invocable<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.script.ScriptEngine<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.script.ScriptEngineManager<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Main</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
        ScriptEngineManager manager <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ScriptEngineManager<span style="color:#f92672">();</span>
        ScriptEngine engine <span style="color:#f92672">=</span> manager<span style="color:#f92672">.</span><span style="color:#a6e22e">getEngineByName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;JavaScript&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!(</span>engine <span style="color:#66d9ef">instanceof</span> Invocable<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Invoking methods is not supported.&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Invocable inv <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Invocable<span style="color:#f92672">)</span> engine<span style="color:#f92672">;</span>
        String scriptPath <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;d:/tmp/calculator.js&#34;</span><span style="color:#f92672">;</span>

        engine<span style="color:#f92672">.</span><span style="color:#a6e22e">eval</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;load(&#39;&#34;</span> <span style="color:#f92672">+</span> scriptPath <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#39;)&#34;</span><span style="color:#f92672">);</span>

        Object calculator <span style="color:#f92672">=</span> engine<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;calculator&#34;</span><span style="color:#f92672">);</span>

        <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> 3<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> 4<span style="color:#f92672">;</span>
        Object addResult <span style="color:#f92672">=</span> inv<span style="color:#f92672">.</span><span style="color:#a6e22e">invokeMethod</span><span style="color:#f92672">(</span>calculator<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;add&#34;</span><span style="color:#f92672">,</span> x<span style="color:#f92672">,</span> y<span style="color:#f92672">);</span>
        Object subResult <span style="color:#f92672">=</span> inv<span style="color:#f92672">.</span><span style="color:#a6e22e">invokeMethod</span><span style="color:#f92672">(</span>calculator<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;subtract&#34;</span><span style="color:#f92672">,</span> x<span style="color:#f92672">,</span> y<span style="color:#f92672">);</span>
        Object mulResult <span style="color:#f92672">=</span> inv<span style="color:#f92672">.</span><span style="color:#a6e22e">invokeMethod</span><span style="color:#f92672">(</span>calculator<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;multiply&#34;</span><span style="color:#f92672">,</span> x<span style="color:#f92672">,</span> y<span style="color:#f92672">);</span>
        Object divResult <span style="color:#f92672">=</span> inv<span style="color:#f92672">.</span><span style="color:#a6e22e">invokeMethod</span><span style="color:#f92672">(</span>calculator<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;divide&#34;</span><span style="color:#f92672">,</span> x<span style="color:#f92672">,</span> y<span style="color:#f92672">);</span>
        Object testResult <span style="color:#f92672">=</span> inv<span style="color:#f92672">.</span><span style="color:#a6e22e">invokeFunction</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;test&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;a not number&#34;</span><span style="color:#f92672">);</span>

        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>addResult<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>subResult<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>mulResult<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>divResult<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>testResult<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>结果：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">7.0
-1.0
12.0
0.75
a not number
</code></pre></div></div>
  
  <section id="post-copyright">
  <dl>
    <dt><span>本文链接：</span>/posts/java-call-javascript/</dt>
    <dt><span>本文作者：</span>大个子斌斌子</dt>
    <dt>
      <span>版权声明：</span>本博客文章除特别声明外，均采用
      <a
        href="https://creativecommons.org/licenses/by-nc-sa/3.0/"
        target="_blank"
        style="text-decoration: underline"
        ><abbr>&nbsp;CC BY-NC-SA 3.0&nbsp;</abbr></a
      >许可协议，转载请注明出处！
    </dt>
  </dl>
</section>

  
  <section id="post-donate">
  <div>
    <p class="donate-message">“感谢您请我喝茶”</p>
    <div class="donate-way">
      <div class="donate-item">
        <img width="188" src="/images/donate_ali.png" alt="支付宝" />
        <div><cite>支付宝</cite></div>
      </div>
      <div class="donate-item">
        <img width="188" src="/images/donate_wx.png" alt="微信" />
        <div><cite>微信</cite></div>
      </div>
    </div>
  </div>
</section>

  
  <div class="tags">
  <ul>
    
  </ul>
</div>

  
  <div class="paginate">
  
  
  <div class="prev">
    <b>&lt;</b>
    <a href="/posts/shadowsocks/">Shadowsocks</a>
  </div>
  
  <div class="paginate-divider"></div>
  
  <div class="next">
    <a href="/posts/centos7-install-mysql-8/">Centos7 安装 MySQL 8.0</a>
    <b>&gt;</b>
  </div>
  
</div>

  
   

</section>
</div>
      </div><aside id="sidebar" class="sidebar">
  <section class="sidebar-wrap"><nav class="site-nav">
  <ul id="menu" class="menu">
    
    
    
    
      <li class="menu-item ">
        <a href="/" rel="section" >
            <i class="menu-item-icon fa fa-fw fa-"></i> <br />首页
        </a>
      </li>
    
    
    
      <li class="menu-item ">
        <a href="/posts" rel="section" >
            <i class="menu-item-icon fa fa-fw fa-"></i> <br />归档
        </a>
      </li>
    
  </ul>
</nav>
</section>
  <div class="sidebar-inner">
    
 
<section class="sidebar-wrap">
  <div class="site-info">
    <div class="site-logo">
      <img width="96" src="/images/logo.png" />
    </div>
    <div><strong>大个子斌斌子</strong></div>
    
    <p>慢慢浇水，等待，发芽，长大！</p>
    
    <div class="site-statis">
      <div class="statis-number">
        <strong class="number">0</strong>
        <div><small>日志</small></div>
      </div>
      <div class="statis-number">
        <strong class="number">1</strong>
        <div><small>分类</small></div>
      </div>
      <div class="statis-number">
        <strong class="number">1</strong>
        <div><small>标签</small></div>
      </div>
    </div>
  </div>
</section>

  </div>
</aside>
</div>

  </main>
  <footer>
    <div class="footer-inner">
<div></div>
<p class="copyright">
  
  <span>
    由&nbsp;<a href="https://gohugo.io" target="_blank">Hugo</a>&nbsp;强力驱动
  </span>
  <span>&nbsp;|&nbsp;</span>
  <span
    >主题&nbsp;-
    <a href="https://github.com/faeli/hugo-theme-zero/" target="_blank">Zero</a>
  </span>
</p>
</div>
  </footer><script src="/js/zero.js"></script>

</body>

</html>
